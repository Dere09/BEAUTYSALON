<%- include('partials/header', { title: 'Service Selection' , navActive: 'services' , hideMenu: true }) %>
  <%- include('partials/sidebar', { path: '/serviceoffer' }) %>

    <div class="main-content">
      <style>
        /* Content-specific styles */
        .service-selection-header {
          text-align: center;
          margin-bottom: 30px;
        }

        .service-selection-header h2 {
          font-family: 'Playfair Display', serif;
          color: #cc3366;
        }

        .highlight {
          color: #e91e63;
          font-weight: 600;
        }

        form#serviceForm {
          background-color: #ffffff;
          border-radius: 12px;
          padding: 25px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
          max-width: 700px;
          margin: 0 auto 40px;
        }

        .service-row {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 15px;
          padding: 10px;
          border-bottom: 1px solid #fdf6f8;
        }

        .service-row label {
          font-size: 16px;
          display: flex;
          align-items: center;
          gap: 10px;
          flex: 1;
          cursor: pointer;
        }

        .service-row select {
          flex: 1;
          padding: 8px;
          border-radius: 6px;
          border: 1px solid #ddd;
          font-size: 14px;
        }

        .submit-btn {
          background-color: #e91e63;
          color: white;
          padding: 12px 25px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-size: 16px;
          font-weight: 600;
          width: 100%;
          transition: background-color 0.3s ease, transform 0.2s;
        }

        .submit-btn:hover {
          background-color: #d81b60;
          transform: translateY(-2px);
        }

        .back-link-btn {
          display: block;
          width: fit-content;
          margin: 30px auto;
          background-color: #cc3366;
          color: white;
          padding: 12px 24px;
          border-radius: 30px;
          text-decoration: none;
          font-weight: bold;
          transition: all 0.3s;
        }

        .back-link-btn:hover {
          background-color: #ad1457;
          box-shadow: 0 5px 15px rgba(204, 51, 102, 0.3);
        }

        .service-list-container {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 20px;
          margin-top: 20px;
        }

        .service-item {
          background: #fff;
          border-radius: 12px;
          padding: 20px;
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
          font-size: 14px;
          border-left: 5px solid #ffe3ec;
        }

        .status-badge {
          display: inline-block;
          padding: 4px 12px;
          border-radius: 20px;
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
        }

        .status-completed {
          background: #d4edda;
          color: #155724;
        }

        .status-pending {
          background: #fff3cd;
          color: #856404;
        }

        .status-canceled {
          background: #f8d7da;
          color: #721c24;
        }
      </style>

      <div class="service-selection-header">
        <h2>
          <i class="fas fa-spa"></i> Service Selection for
          <span class="highlight">
            <%= customers.fullName %>
          </span>
          <small>(ID: <%= regId %>)</small>
        </h2>
      </div>

      <form method="POST" action="/service" id="serviceForm">
        <input type="hidden" name="registrationId" value="<%= regId %>">
        <% serviceOffer.forEach(service=> { %>
          <div class="service-row">
            <label>
              <input type="checkbox" name="services" value="<%= service.serviceId %>"
                data-name="<%= service.serviceName %>">
              <%= service.serviceName %>
            </label>
            <select name="staff_<%= service.serviceId %>">
              <option disabled selected>Choose staff...</option>
              <% staff.forEach(s=> { %>
                <option value="<%= s.username %>">
                  <%= s.fullName %>
                </option>
                <% }) %>
            </select>
          </div>
          <% }) %>

            <button type="submit" class="submit-btn">
              <i class="fas fa-paper-plane"></i> Submit Selected Services
            </button>
      </form>

      <div class="content-box">
        <h3><i class="fas fa-list-alt"></i> Registered Service List</h3>
        <div class="service-list-container">
          <!-- Mock data for demonstration as seen in original -->
          <div class="service-item">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
              <strong style="color:#e91e63;">#1</strong>
              <span class="status-badge status-completed">Completed</span>
            </div>
            <p><strong>Customer:</strong> Bisrat Bekele</p>
            <p><strong>Service:</strong> Haircut</p>
            <p><strong>Staff:</strong> John Doe</p>
            <p><strong>Date:</strong> 2025-07-01</p>
          </div>

          <div class="service-item">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
              <strong style="color:#e91e63;">#2</strong>
              <span class="status-badge status-pending">Pending</span>
            </div>
            <p><strong>Customer:</strong> Sara Kedir</p>
            <p><strong>Service:</strong> Facial</p>
            <p><strong>Staff:</strong> Jane Smith</p>
            <p><strong>Date:</strong> 2025-07-02</p>
          </div>
        </div>
      </div>

      <a class="back-link-btn" href="/register">
        <i class="fas fa-user-plus"></i> Add New Registration
      </a>
    </div>

    <script src="/js/event.js"></script>

    <%- include('partials/footer') %>